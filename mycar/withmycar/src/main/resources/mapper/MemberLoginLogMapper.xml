<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.qf.withmycar.mapper.MemberLoginLogMapper">
    <resultMap id="BaseResultMap" type="com.qf.withmycar.pojo.MemberLoginLog">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="member_id" property="memberId" jdbcType="BIGINT"/>
        <result column="login_time" property="loginTime" jdbcType="INTEGER"/>
        <result column="is_first" property="isFirst" jdbcType="TINYINT"/>
        <result column="login_ip" property="loginIp" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, member_id, login_time, is_first, login_ip
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from member_login_log
        where id = #{id,jdbcType=BIGINT}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from member_login_log
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.qf.withmycar.pojo.MemberLoginLog">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into member_login_log (id, member_id, login_time,
        is_first, login_ip)
        values (#{id,jdbcType=BIGINT}, #{memberId,jdbcType=BIGINT}, #{loginTime,jdbcType=INTEGER},
        #{isFirst,jdbcType=TINYINT}, #{loginIp,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.qf.withmycar.pojo.MemberLoginLog">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into member_login_log
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="memberId != null">
                member_id,
            </if>
            <if test="loginTime != null">
                login_time,
            </if>
            <if test="isFirst != null">
                is_first,
            </if>
            <if test="loginIp != null">
                login_ip,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="memberId != null">
                #{memberId,jdbcType=BIGINT},
            </if>
            <if test="loginTime != null">
                #{loginTime,jdbcType=INTEGER},
            </if>
            <if test="isFirst != null">
                #{isFirst,jdbcType=TINYINT},
            </if>
            <if test="loginIp != null">
                #{loginIp,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.qf.withmycar.pojo.MemberLoginLog">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update member_login_log
        <set>
            <if test="memberId != null">
                member_id = #{memberId,jdbcType=BIGINT},
            </if>
            <if test="loginTime != null">
                login_time = #{loginTime,jdbcType=INTEGER},
            </if>
            <if test="isFirst != null">
                is_first = #{isFirst,jdbcType=TINYINT},
            </if>
            <if test="loginIp != null">
                login_ip = #{loginIp,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.qf.withmycar.pojo.MemberLoginLog">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update member_login_log
        set member_id = #{memberId,jdbcType=BIGINT},
        login_time = #{loginTime,jdbcType=INTEGER},
        is_first = #{isFirst,jdbcType=TINYINT},
        login_ip = #{loginIp,jdbcType=VARCHAR}
        where id = #{id,jdbcType=BIGINT}
    </update>

    <select id="memberAll" resultMap="BaseResultMap">
    SELECT * FROM MEMBER_LOGIN_LOG
  </select>

    <!--<resultMap id="BaseResultMap1" type="com.qf.withmycar.vo.MemberLoginLogVo">-->
    <!--<id column="id" property="id" jdbcType="BIGINT" />-->
    <!--<result column="member_id" property="memberId" jdbcType="BIGINT" />-->
    <!--<result column="login_time" property="loginTime" jdbcType="INTEGER" />-->
    <!--<result column="is_first" property="isFirst" jdbcType="TINYINT" />-->
    <!--<result column="login_ip" property="loginIp" jdbcType="VARCHAR" />-->
    <!--</resultMap>-->

    <select id="selectA" resultType="com.qf.withmycar.vo.MemberLoginLogVo" parameterType="Integer">
    select
    u.id id,
u.name namea,
u.username nameb,
u.phone phone,
r.name namec,
u.email email,
u.dept dept

from
admin_user u,
admin_role r,
admin_user_role ur
where
r.id=ur.role_id
and ur.user_id=u.id
and u.id=1;
  </select>


    <update id="updateUser" parameterType="com.qf.withmycar.pojo.AdminUser">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update admin_user
        <set>
            <if test="username != null">
                username = #{username,jdbcType=VARCHAR},
            </if>
            <if test="password != null">
                password = #{password,jdbcType=VARCHAR},
            </if>
            <if test="name != null">
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="salt != null">
                salt = #{salt,jdbcType=VARCHAR},
            </if>
            <if test="phone != null">
                phone = #{phone,jdbcType=VARCHAR},
            </if>
            <if test="email != null">
                email = #{email,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                status = #{status,jdbcType=TINYINT},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=INTEGER},
            </if>
            <if test="isSuper != null">
                is_super = #{isSuper,jdbcType=TINYINT},
            </if>
            <if test="consumer != null">
                consumer = #{consumer,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="dept != null">
                dept = #{dept,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>

    <select id="updateUserPass" parameterType="com.qf.withmycar.pojo.AdminUser" resultType="String">
    select password from admin_user where id=#{id,jdbcType=INTEGER} and  password = #{password,jdbcType=VARCHAR}
  </select>

    <select id="selectMo" parameterType="Integer" resultType="com.qf.withmycar.vo.MemberLoginLogUserVo">
  SELECT
  u.id id,
    u.username named,
		ml.login_time timed,
		ml.login_ip ip,
		ml.is_first firstd

FROM

  admin_user u,
	MEMBER_LOGIN_LOG ml

where
ml.member_id=u.id
and  u.id=1
</select>

    <select id="selectMoHu" resultType="com.qf.withmycar.vo.MemberLoginLogUserVo" parameterType="com.qf.withmycar.vo.MemberLoginLogUserVo">


    </select>
</mapper>